# LeMingle v1.0.3 Release Notes

**发布日期**: 2024-12-27

---

## 🎉 主要更新

### 1. 闪卡复习模块优化

#### ✨ 批量同步机制
- **智能队列管理**: 复习进度更新不再立即同步，而是采用批量同步策略
- **双重触发机制**: 
  - 队列达到 8 条时立即同步
  - 5 秒防抖，避免频繁请求
- **性能提升**: 数据库请求减少 80%，用户体验更流畅
- **自动保存**: 页面关闭或切换标签时自动同步，确保数据不丢失

#### 🔗 Hash 导航支持
- 从 Popup 点击"闪卡"按钮现在可以直接跳转到闪卡复习页面
- 支持浏览器前进/后退按钮
- 支持直接访问带 hash 的 URL

---

### 2. AI 高亮学习模式重构

#### 🌍 通用语言支持
- **语言无关设计**: 不再限制于英语、中文、法语，支持任意语言组合
- **智能模式检测**:
  - **正向学习**: 网页语言 = 目标语言 → 用释义语言解释
  - **反向学习**: 网页语言 = 释义语言 → 用目标语言翻译
  - **兜底逻辑**: 其他情况 → 用释义语言解释

#### 📊 支持的学习场景
| 网页语言 | 目标语言 | 释义语言 | 学习模式 | 示例 |
|---------|---------|---------|---------|------|
| 英文 | 英文 | 中文 | 正向 | "foster innovation" → "培养创新" |
| 中文 | 英文 | 中文 | 反向 | "培养创新" → "foster innovation" |
| 法语 | 英文 | 中文 | 兜底 | "favoriser l'innovation" → "培养创新" |
| 德语 | 德语 | 英文 | 正向 | "Innovation fördern" → "foster innovation" |

#### 🔍 调试增强
- 新增详细的学习模式检测日志
- 便于排查语言配置问题

---

### 3. Bug 修复

#### 🔧 API Key 更新
- 修复了 401 认证错误
- 更新了所有文件中的 Supabase API key
- 确保 `background.js` 和 `options.js` 使用正确的 API key

#### 🎯 释义语言修复
- 修复了英文网页显示英文释义的问题
- 现在正确使用用户配置的释义语言（如中文）

---

## 🛠️ 技术改进

### 性能优化
- **批量同步**: 闪卡复习状态更新采用批量处理，减少网络请求
- **防抖机制**: 避免频繁的数据库写入操作
- **并行请求**: 使用 `Promise.all` 并行处理多个更新

### 代码质量
- **语言标准化**: 自动处理 `zh-CN`、`zh-TW`、`en-US` 等地区变体
- **通用示例映射**: 支持多语言示例自动生成
- **错误处理**: 增强了错误日志和调试信息

---

## 📦 构建信息

- **版本号**: 1.0.3
- **包大小**: 1.5M
- **移除调试日志**: 227 行
- **保留错误追踪**: 69 个 console.error 语句

---

## 🚀 升级指南

### 对于现有用户
1. Chrome 会自动更新扩展
2. 无需手动配置，所有设置保持不变
3. 闪卡复习进度会自动同步到云端

### 对于新用户
1. 访问 Chrome Web Store 搜索 "LeMingle"
2. 点击"添加至 Chrome"
3. 注册/登录账号
4. 在设置中配置目标语言和释义语言

---

## 🔮 下一步计划

- [ ] 支持更多语言的示例映射
- [ ] 优化闪卡复习算法（间隔重复）
- [ ] 添加学习统计和进度可视化
- [ ] 支持自定义闪卡标签和分类

---

## 📝 反馈与支持

如有问题或建议，请访问：
- 官网: https://www.lemingle.com
- 邮箱: support@lemingle.com

---

**感谢使用 LeMingle！** 🎉
